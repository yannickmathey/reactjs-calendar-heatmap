{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0b733c044c302c166fcf","webpack:///./src/index.js","webpack:///./src/calendar-heatmap.component.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\",\"umd\":\"react\"}","webpack:///external \"moment\"","webpack:///external \"d3\"","webpack:///./src/calendar-heatmap.css?3f75","webpack:///./src/calendar-heatmap.css","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js"],"names":["React","d3","CalendarHeatmap","props","settings","gutter","item_gutter","width","height","item_size","label_padding","max_block_height","transition_duration","tooltip_width","tooltip_padding","in_transition","overview","history","selected","calcDimensions","bind","createElements","parseData","drawChart","window","addEventListener","removeEventListener","svg","select","append","attr","items","labels","buttons","tooltip","heatmapTooltip","style","dayIndex","Math","round","subtract","startOf","colIndex","trunc","numWeeks","container","offsetWidth","data","summary","map","d","details","reduce","uniques","project","name","value","unsorted_summary","Object","keys","key","sort","a","b","drawGlobalOverview","drawYearOverview","drawMonthOverview","drawWeekOverview","drawDayOverview","length","push","color","scaleLinear","range","domain","workingTime","overColor","start","date","end","endOf","year_data","timeYears","getSummary","year","item","prev","current","total","max_value","max","year_labels","yearScale","scaleBand","rangeRound","padding","selectAll","remove","item_block","enter","on","hideTooltip","removeGlobalOverview","tooltip_html","sec","parseInt","days","floor","hours","minutes","counter","formatTime","other_projects_sum","x","y","html","transition","duration","ease","easeLinear","delay","i","call","callback","empty","n","each","apply","arguments","text","year_label","start_of_year","end_of_year","filter","calcItemX","calcItemY","weekday","calcItemSize","handler","circle","event","currentTarget","repeat","header","format","cos","PI","random","month_labels","timeMonths","monthScale","toLocaleDateString","month","selected_month","isSame","month_data","e","removeYearOverview","day_labels","timeDays","dayScale","bandwidth","selected_day","day","drawButton","start_of_month","end_of_month","week_labels","clone","week","add","weekScale","min","item_width","itemScale","parentNode","offset","Date","week_data","removeMonthOverview","start_of_week","end_of_week","project_labels","projectScale","scaleTime","timeSecond","timeLabels","timeHours","timeScale","obj","text_length","node","getComputedTextLength","slice","button","removeWeekOverview","removeDayOverview","pop","hideBackButton","seconds","time","calendarHeatmap","elem","Component","defaultProps","undefined"],"mappings":"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A,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;ACzBA;AACA;;;AAGA;AACA,qEAAsE,8CAA8C,sBAAsB,0BAA0B,2BAA2B,8BAA8B,GAAG,wFAAwF,yBAAyB,uBAAuB,kBAAkB,iBAAiB,qBAAqB,qBAAqB,kBAAkB,oBAAoB,qBAAqB,sBAAsB,2BAA2B,2DAA2D,0CAA0C,GAAG,iIAAiI,0BAA0B,iBAAiB,GAAG,6FAA6F,0BAA0B,eAAe,wBAAwB,2BAA2B,GAAG,6NAA6N,wBAAwB,qBAAqB,4BAA4B,GAAG;;AAE7xC;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;AC5WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,WAAW,EAAE;AACrD,wCAAwC,WAAW,EAAE;;AAErD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,sCAAsC;AACtC,GAAG;AACH;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA","file":"calendar-heatmap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"moment\"), require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"moment\", \"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CalendarHeatmap\"] = factory(require(\"react\"), require(\"moment\"), require(\"d3\"));\n\telse\n\t\troot[\"CalendarHeatmap\"] = factory(root[\"React\"], root[\"moment\"], root[\"d3\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0b733c044c302c166fcf","import CalendarHeatmap from './calendar-heatmap.component.js'\n\nexport default CalendarHeatmap\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import * as React from 'react'\n\nimport moment from 'moment'\nimport * as d3 from 'd3'\n\nimport styles from './calendar-heatmap.css'\n\nclass CalendarHeatmap extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.settings = {\n      gutter: 5,\n      item_gutter: 1,\n      width: 1000,\n      height: 200,\n      item_size: 10,\n      label_padding: 40,\n      max_block_height: 20,\n      transition_duration: 500,\n      tooltip_width: 250,\n      tooltip_padding: 15,\n    }\n\n    this.in_transition = false\n    this.overview = this.props.overview\n    this.history = ['global']\n    this.selected = {}\n\n    this.calcDimensions = this.calcDimensions.bind(this)\n  }\n\n  componentDidMount() {\n    this.createElements()\n    this.parseData()\n    this.drawChart()\n\n    window.addEventListener('resize', this.calcDimensions)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.calcDimensions)\n  }\n\n  createElements() {\n    // Create svg element\n    this.svg = d3.select('#calendar-heatmap')\n      .append('svg')\n      .attr('class', 'svg')\n\n    // Create other svg elements\n    this.items = this.svg.append('g')\n    this.labels = this.svg.append('g')\n    this.buttons = this.svg.append('g')\n\n    // Add tooltip to the same element as main svg\n    this.tooltip = d3.select('#calendar-heatmap')\n      .append('div')\n      .attr('class', styles.heatmapTooltip)\n      .style('opacity', 0)\n      .style('pointer-events', 'none')\n      .style('position', 'absolute')\n      .style('z-index', 9999)\n      .style('width', '250px')\n      .style('max-width', '500px')\n      .style('overflow', 'hidden')\n      .style('padding', '15px')\n      .style('font-size', '12px')\n      .style('line-height', '1.2')\n      .style('border-radius', '8px')\n      .style('box-shadow', '0 0 10px rgb(151, 151, 151)')\n      .style('color', 'rgb(51, 51, 51)')\n      .style('background', 'rgba(255, 255, 255, .9)')\n\n    this.calcDimensions()\n  }\n\n  // Calculate dimensions based on available width\n  calcDimensions() {\n    let dayIndex = Math.round((moment() - moment().subtract(1, 'year').startOf('week')) / 86400000)\n    let colIndex = Math.trunc(dayIndex / 7)\n    let numWeeks = colIndex + 1\n\n    this.settings.width = this.container.offsetWidth < 1000 ? 1000 : this.container.offsetWidth\n    this.settings.item_size = ((this.settings.width - this.settings.label_padding) / numWeeks - this.settings.gutter)\n    this.settings.height = this.settings.label_padding + 7 * (this.settings.item_size + this.settings.gutter)\n    this.svg.attr('width', this.settings.width)\n      .attr('height', this.settings.height)\n\n    if ( !!this.props.data && !!this.props.data[0].summary ) {\n      this.drawChart()\n    }\n  }\n\n  parseData() {\n    if ( !this.props.data ) { return }\n\n    // Get daily summary if that was not provided\n    if ( !this.props.data[0].summary ) {\n      this.props.data.map(d => {\n        let summary = d.details.reduce((uniques, project) => {\n          if (!uniques[project.name]) {\n            uniques[project.name] = {\n              'value': project.value\n            }\n          } else {\n            uniques[project.name].value += project.value\n          }\n          return uniques\n        }, {})\n        let unsorted_summary = Object.keys(summary).map(key => {\n          return {\n            'name': key,\n            'value': summary[key].value\n          }\n        })\n        d.summary = unsorted_summary.sort((a, b) => {\n          return b.value - a.value\n        })\n        return d\n      })\n    }\n  }\n\n  drawChart() {\n    if ( this.overview === 'global' ) {\n      this.drawGlobalOverview()\n    } else if ( this.overview === 'year' ) {\n      this.drawYearOverview()\n    } else if ( this.overview === 'month' ) {\n      this.drawMonthOverview()\n    } else if ( this.overview === 'week' ) {\n      this.drawWeekOverview()\n    } else if ( this.overview === 'day' ) {\n      this.drawDayOverview()\n    }\n  }\n\n\n  /**\n   * Draw global overview (multiple years)\n   */\n  drawGlobalOverview() {\n\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    let color = d3.scaleLinear()\n      .range(['#ffffff', this.props.color])\n      .domain([-0.15, this.props.workingTime * 60 * 60])\n\n    let overColor = d3.scaleLinear()\n      .range([this.props.color, this.props.overColor])\n      .domain([this.props.workingTime * 60 * 60, this.props.workingTime * 1.25 * 60 * 60])\n\n    // Define start and end of the dataset\n    let start = moment(this.props.data[0].date).startOf('year')\n    let end = moment(this.props.data[this.props.data.length - 1].date).endOf('year')\n\n    // Define array of years and total values\n    let year_data = d3.timeYears(start, end).map(d => {\n      let date = moment(d)\n      let getSummary = () => {\n        let summary = this.props.data.reduce((summary, d) => {\n          if (moment(d.date).year() === date.year()) {\n            d.summary.map(item => {\n              if (!summary[item.name]) {\n                summary[item.name] = {\n                  'value': item.value,\n                }\n              } else {\n                summary[item.name].value += item.value\n              }\n            })\n          }\n          return summary\n        }, {})\n        let unsorted_summary = Object.keys(summary).map(key => {\n          return {\n            'name': key,\n            'value': summary[key].value\n          }\n        })\n        return unsorted_summary.sort((a, b) => {\n          return b.value - a.value\n        })\n      }\n      return {\n        'date': date,\n        'total': this.props.data.reduce((prev, current) => {\n          if (moment(current.date).year() === date.year()) {\n            prev += current.total\n          }\n          return prev\n        }, 0),\n        'summary': getSummary(),\n      }\n    })\n\n    // Calculate max value of all the years in the dataset\n    let max_value = d3.max(year_data, d => {\n      return d.total\n    })\n\n    // Define year labels and axis\n    let year_labels = d3.timeYears(start, end).map(d => {\n      return moment(d)\n    })\n    let yearScale = d3.scaleBand()\n      .rangeRound([0, this.settings.width])\n      .padding([0.05])\n      .domain(year_labels.map(d => {\n        return d.year()\n      }))\n\n    // Add global data items to the overview\n    this.items.selectAll('.item-block-year').remove()\n    let item_block = this.items.selectAll('.item-block-year')\n      .data(year_data)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block-year')\n      .style('cursor', 'default')\n      .attr('width', () => {\n        return (this.settings.width - this.settings.label_padding) / year_labels.length - this.settings.gutter * 5\n      })\n      .attr('height', () => {\n        return this.settings.height - this.settings.label_padding\n      })\n      .attr('transform', d => {\n        return 'translate(' + yearScale(d.date.year()) + ',' + this.settings.tooltip_padding * 2 + ')'\n      })\n      .attr('fill', d => {\n        return d.total > this.props.workingTime * 60 * 60 ?\n          overColor(d.total) :\n          d.total === 0 ?\n          'transparent' :\n          color(d.total)\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Set in_transition flag\n        this.in_transition = true\n\n        // Set selected date to the one clicked on\n        this.selected = d\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all global overview related items and labels\n        this.removeGlobalOverview()\n\n        // Redraw the chart\n        this.overview = 'year';\n        this.drawChart()\n      })\n      .style('opacity', 0)\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n\n        // Construct tooltip\n        let tooltip_html = ''\n        tooltip_html += '<div><span><strong>Total temps travaill :</strong></span>'\n\n        let sec = parseInt(d.total, 10)\n        let days = Math.floor(sec / 86400)\n        if (days > 0) {\n          tooltip_html += '<span>' + (days === 1 ? '1 jour' : days + ' jours') + '</span></div>'\n        }\n        let hours = Math.floor((sec - (days * 86400)) / 3600)\n        if (hours > 0) {\n          if (days > 0) {\n            tooltip_html += '<div><span></span><span>' + (hours === 1 ? '1 heure' : hours + ' heures') + '</span></div>'\n          } else {\n            tooltip_html += '<span>' + (hours === 1 ? '1 heure' : hours + ' heures') + '</span></div>'\n          }\n        }\n        let minutes = Math.floor((sec - (days * 86400) - (hours * 3600)) / 60)\n        if (minutes > 0) {\n          if (days > 0 || hours > 0) {\n            tooltip_html += '<div><span></span><span>' + (minutes === 1 ? '1 minute' : minutes + ' minutes') + '</span></div>'\n          } else {\n            tooltip_html += '<span>' + (minutes === 1 ? '1 minute' : minutes + ' minutes') + '</span></div>'\n          }\n        }\n        tooltip_html += '<br />'\n\n        // Add summary to the tooltip\n        if (d.summary.length <= 5) {\n          let counter = 0\n          while ( counter < d.summary.length ) {\n            tooltip_html += '<div><span><strong>' + d.summary[counter].name + '</strong></span>'\n            tooltip_html += '<span>' + this.formatTime(d.summary[counter].value) + '</span></div>'\n            counter++\n          }\n        } else {\n          let counter = 0\n          while ( counter < 5 ) {\n            tooltip_html += '<div><span><strong>' + d.summary[counter].name + '</strong></span>'\n            tooltip_html += '<span>' + this.formatTime(d.summary[counter].value) + '</span></div>'\n            counter++\n          }\n\n          tooltip_html += '<br />'\n\n          counter = 5\n          let other_projects_sum = 0\n          while ( counter < d.summary.length ) {\n            other_projects_sum = +d.summary[counter].value\n            counter++\n          }\n          tooltip_html += '<div><span><strong>Autres :</strong></span>'\n          tooltip_html += '<span>' + this.formatTime(other_projects_sum) + '</span></div>'\n        }\n\n        // Calculate tooltip position\n        let x = yearScale(d.date.year()) + this.settings.tooltip_padding * 2\n        while (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 5)) {\n          x -= 10\n        }\n        let y = this.settings.tooltip_padding * 3\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n        this.hideTooltip()\n      })\n      .transition()\n      .delay((d, i) => {\n        return this.settings.transition_duration * (i + 1) / 10\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => {++n })\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add year labels\n    this.labels.selectAll('.label-year').remove()\n    this.labels.selectAll('.label-year')\n      .data(year_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-year')\n      .style('cursor', 'default')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return d.year()\n      })\n      .attr('x', d => {\n        return yearScale(d.year())\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', year_label => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-year')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).year() === year_label.year()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-year')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Set in_transition flag\n        this.in_transition = true\n\n        // Set selected year to the one clicked on\n        this.selected = { date: d }\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all global overview related items and labels\n        this.removeGlobalOverview()\n\n        // Redraw the chart\n        this.overview = 'year'\n        this.drawChart()\n      })\n  }\n\n\n  /**\n   * Draw year overview\n   */\n  drawYearOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    // Define start and end date of the selected year\n    let start_of_year = moment(this.selected.date).startOf('year')\n    let end_of_year = moment(this.selected.date).endOf('year')\n\n    // Filter data down to the selected year\n    let year_data = this.props.data.filter(d => {\n      return start_of_year <= moment(d.date) && moment(d.date) < end_of_year\n    })\n\n    // Calculate max value of the year data\n    let max_value = d3.max(year_data, d => d.total)\n\n    let color = d3.scaleLinear()\n      .range(['#ffffff', this.props.color])\n      .domain([-0.15, this.props.workingTime * 60 * 60])\n\n    let overColor = d3.scaleLinear()\n      .range([this.props.color, this.props.overColor])\n      .domain([this.props.workingTime * 60 * 60, this.props.workingTime * 1.25 * 60 * 60])\n\n    let calcItemX = (d) => {\n      let date = moment(d.date)\n      let dayIndex = Math.round((date - moment(start_of_year).startOf('week')) / 86400000)\n      let colIndex = Math.trunc(dayIndex / 7)\n      return colIndex * (this.settings.item_size + this.settings.gutter) + this.settings.label_padding\n    }\n\n    let calcItemY = d => {\n      return this.settings.label_padding + moment(d.date).weekday() * (this.settings.item_size + this.settings.gutter)\n    }\n\n    let calcItemSize = d => {\n      if ( max_value <= 0 ) {\n        return this.settings.item_size\n      }\n      return this.settings.item_size * 0.75 + (this.settings.item_size * d.total / max_value) * 0.25\n    }\n\n    this.items.selectAll('.item-circle').remove()\n    this.items.selectAll('.item-circle')\n      .data(year_data)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-circle')\n      .style('cursor', 'pointer')\n      .style('opacity', 0)\n      .style('stroke-width', 1)\n      .style('stroke', 'rgb(242, 242, 242)')\n      .attr('x', d => {\n        return calcItemX(d) + (this.settings.item_size - calcItemSize(d)) / 2\n      })\n      .attr('y', d => {\n        return calcItemY(d) + (this.settings.item_size - calcItemSize(d)) / 2\n      })\n      .attr('rx', d => {\n        return calcItemSize(d)\n      })\n      .attr('ry', d => {\n        return calcItemSize(d)\n      })\n      .attr('width', d => {\n        return calcItemSize(d)\n      })\n      .attr('height', d => {\n        return calcItemSize(d)\n      })\n      .attr('fill', d => {\n        return d.total > this.props.workingTime * 60 * 60 ?\n          overColor(d.total) :\n          d.total === 0 ?\n          'transparent' :\n          color(d.total)\n      })\n      .on('click', d => {\n        if (!!this.props.handler && typeof this.props.handler == 'function') {\n          this.props.handler(d)\n        }\n        // if (this.in_transition) { return }\n\n        // // Don't transition if there is no data to show\n        // if (d.total === 0) { return }\n\n        // this.in_transition = true\n\n        // // Set selected date to the one clicked on\n        // this.selected = d\n\n        // // Hide tooltip\n        // this.hideTooltip()\n\n        // // Remove all year overview related items and labels\n        // this.removeYearOverview()\n\n        // // Redraw the chart\n        // this.overview = 'day'\n        // this.drawChart()\n      })\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n\n        // Pulsating animation\n        let circle = d3.select(d3.event.currentTarget)\n        let repeat = () => {\n          circle = circle.transition()\n            .duration(this.settings.transition_duration)\n            .ease(d3.easeLinear)\n            .attr('x', d => {\n              return calcItemX(d) - (this.settings.item_size * 1.1 - this.settings.item_size) / 2\n            })\n            .attr('y', d => {\n              return calcItemY(d) - (this.settings.item_size * 1.1 - this.settings.item_size) / 2\n            })\n            .attr('width', this.settings.item_size * 1.1)\n            .attr('height', this.settings.item_size * 1.1)\n            .transition()\n            .duration(this.settings.transition_duration)\n            .ease(d3.easeLinear)\n            .attr('x', d => {\n              return calcItemX(d) + (this.settings.item_size - calcItemSize(d)) / 2\n            })\n            .attr('y', d => {\n              return calcItemY(d) + (this.settings.item_size - calcItemSize(d)) / 2\n            })\n            .attr('width', d => {\n              return calcItemSize(d)\n            })\n            .attr('height', d => {\n              return calcItemSize(d)\n            })\n            .on('end', repeat)\n        }\n        repeat()\n\n        // Construct tooltip\n        let tooltip_html = ''\n        tooltip_html += `<div class=\"${styles.header}\"><strong>${d.total ? this.formatTime(d.total) : 'Aucune donnes'} travailles</strong></div>`\n        tooltip_html += '<div>' + moment(d.date).format('dddd, Do MMM YYYY') + '</div><br>'\n\n        // Add summary to the tooltip\n        let counter = 0\n        while ( counter < d.summary.length ) {\n          tooltip_html += '<div><span><strong>' + d.summary[counter].name + '</strong></span>'\n          tooltip_html += '<span>' + this.formatTime(d.summary[counter].value) + '</span></div>'\n          counter++\n        }\n\n        // Calculate tooltip position\n        let x = calcItemX(d) + this.settings.item_size\n        if (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 3)) {\n          x -= this.settings.tooltip_width + this.settings.tooltip_padding * 2\n        }\n        let y = calcItemY(d) + this.settings.item_size\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        // Set circle radius back to what its supposed to be\n        d3.select(d3.event.currentTarget).transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .attr('x', d => {\n            return calcItemX(d) + (this.settings.item_size - calcItemSize(d)) / 2\n          })\n          .attr('y', d => {\n            return calcItemY(d) + (this.settings.item_size - calcItemSize(d)) / 2\n          })\n          .attr('width', d => {\n            return calcItemSize(d)\n          })\n          .attr('height', d => {\n            return calcItemSize(d)\n          })\n\n        // Hide tooltip\n        this.hideTooltip()\n      })\n      .transition()\n      .delay(() => {\n        return (Math.cos(Math.PI * Math.random()) + 1) * this.settings.transition_duration\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => ++n)\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add month labels\n    let month_labels = d3.timeMonths(start_of_year, end_of_year)\n    let monthScale = d3.scaleLinear()\n      .range([0, this.settings.width])\n      .domain([0, month_labels.length])\n    this.labels.selectAll('.label-month').remove()\n    this.labels.selectAll('.label-month')\n      .data(month_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-month')\n      .style('cursor', 'default')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return d.toLocaleDateString('en-us', { month: 'short' })\n      })\n      .attr('x', (d, i) => {\n        return monthScale(i) + (monthScale(i) - monthScale(i - 1)) / 2\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected_month = moment(d)\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return moment(d.date).isSame(selected_month, 'month') ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Check month data\n        let month_data = this.props.data.filter(e => {\n          return moment(d).startOf('month') <= moment(e.date) && moment(e.date) < moment(d).endOf('month')\n        })\n\n        // Don't transition if there is no data to show\n        if (!month_data.length) { return }\n\n        // Set selected month to the one clicked on\n        this.selected = { date: d }\n\n        this.in_transition = true\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all year overview related items and labels\n        this.removeYearOverview()\n\n        // Redraw the chart\n        this.overview = 'month'\n        this.drawChart()\n      })\n\n    // Add day labels\n    let day_labels = d3.timeDays(moment().startOf('week'), moment().endOf('week'))\n    let dayScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.height])\n      .domain(day_labels.map(d => {\n        return moment(d).weekday()\n      }))\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-day')\n      .data(day_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .style('cursor', 'default')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.label_padding / 3)\n      .attr('y', (d, i) => {\n        return dayScale(i) + dayScale.bandwidth() / 1.75\n      })\n      .style('text-anchor', 'left')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return moment(d).format('dddd')[0]\n      })\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected_day = moment(d)\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).day() === selected_day.day()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-circle')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n\n    // Add button to switch back to previous overview\n    this.drawButton()\n  }\n\n\n  /**\n   * Draw month overview\n   */\n  drawMonthOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    // Define beginning and end of the month\n    let start_of_month = moment(this.selected.date).startOf('month')\n    let end_of_month = moment(this.selected.date).endOf('month')\n\n    // Filter data down to the selected month\n    let month_data = this.props.data.filter(d => {\n      return start_of_month <= moment(d.date) && moment(d.date) < end_of_month\n    })\n    let max_value = d3.max(month_data, d => {\n      return d3.max(d.summary, d => {\n        return d.value\n      })\n    })\n\n    let color = d3.scaleLinear()\n      .range(['#ffffff', this.props.color])\n      .domain([-0.15, this.props.workingTime * 60 * 60])\n\n    let overColor = d3.scaleLinear()\n      .range([this.props.color, this.props.overColor])\n      .domain([this.props.workingTime * 60 * 60, this.props.workingTime * 1.25 * 60 * 60])\n\n    // Define day labels and axis\n    let day_labels = d3.timeDays(moment().startOf('week'), moment().endOf('week'))\n    let dayScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.height])\n      .domain(day_labels.map(d => {\n        return moment(d).weekday()\n      }))\n\n    // Define week labels and axis\n    let week_labels = [start_of_month.clone()]\n    while (start_of_month.week() !== end_of_month.week()) {\n      week_labels.push(start_of_month.add(1, 'week').clone())\n    }\n    let weekScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.width])\n      .padding([0.05])\n      .domain(week_labels.map(weekday => {\n        return weekday.week()\n      }))\n\n    // Add month data items to the overview\n    this.items.selectAll('.item-block-month').remove()\n    let item_block = this.items.selectAll('.item-block-month')\n      .data(month_data)\n      .enter()\n      .append('g')\n      .attr('class', 'item item-block-month')\n      .style('cursor', 'pointer')\n      .attr('width', () => {\n        return (this.settings.width - this.settings.label_padding) / week_labels.length - this.settings.gutter * 5\n      })\n      .attr('height', () => {\n        return Math.min(dayScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('transform', d => {\n        return 'translate(' + weekScale(moment(d.date).week()) + ',' + ((dayScale(moment(d.date).weekday()) + dayScale.bandwidth() / 1.75) - 15) + ')'\n      })\n      .attr('total', d => {\n        return d.total\n      })\n      .attr('date', d => {\n        return d.date\n      })\n      .attr('offset', 0)\n      .on('click', d => {\n        if (!!this.props.handler && typeof this.props.handler == 'function') {\n          this.props.handler(d)\n        }\n        // if (this.in_transition) { return }\n\n        // // Don't transition if there is no data to show\n        // if (d.total === 0) { return }\n\n        // this.in_transition = true\n\n        // // Set selected date to the one clicked on\n        // this.selected = d\n\n        // // Hide tooltip\n        // this.hideTooltip()\n\n        // // Remove all month overview related items and labels\n        // this.removeMonthOverview()\n\n        // // Redraw the chart\n        // this.overview = 'day'\n        // this.drawChart()\n      })\n\n    let item_width = (this.settings.width - this.settings.label_padding) / week_labels.length - this.settings.gutter * 5\n    let itemScale = d3.scaleLinear()\n      .rangeRound([0, item_width])\n\n    let item_gutter = this.settings.item_gutter\n    item_block.selectAll('.item-block-rect')\n      .data(d => d.summary)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block-rect')\n      .style('cursor', 'pointer')\n      .attr('x', function(d) {\n        let total = parseInt(d3.select(this.parentNode).attr('total'))\n        let offset = parseInt(d3.select(this.parentNode).attr('offset'))\n        itemScale.domain([0, total])\n        d3.select(this.parentNode).attr('offset', offset + itemScale(d.value))\n        return offset\n      })\n      .attr('width', function(d) {\n        let total = parseInt(d3.select(this.parentNode).attr('total'))\n        itemScale.domain([0, total])\n        return Math.max((itemScale(d.value) - item_gutter), 1)\n      })\n      .attr('height', () => {\n        return Math.min(dayScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('fill', d => {\n        return d.total > this.props.workingTime * 60 * 60 ?\n          overColor(d.total) :\n          d.total === 0 ?\n          'fefefe' :\n          color(d.total)\n      })\n      .style('opacity', 0)\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n\n        // Get date from the parent node\n        let parentNode = d3.select(d3.event.currentTarget.parentNode)\n        let date = new Date(parentNode.attr('date'))\n\n        // Construct tooltip\n        let tooltip_html = ''\n        tooltip_html += `<div class=\"${styles.header}\"><strong>${d.name}</strong></div><br>`\n        tooltip_html += '<div><strong>' + (d.value ? this.formatTime(d.value) : 'Aucune donne') + ' travailles</strong></div>'\n        tooltip_html += '<div>on ' + moment(date).format('dddd, Do MMM YYYY') + '</div>'\n\n        // Calculate tooltip position\n        let x = weekScale(moment(date).week()) + this.settings.tooltip_padding\n        while (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 3)) {\n          x -= 10\n        }\n        let y = dayScale(moment(date).weekday()) + this.settings.tooltip_padding * 2\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n        this.hideTooltip()\n      })\n      .transition()\n      .delay(() => {\n        return (Math.cos(Math.PI * Math.random()) + 1) * this.settings.transition_duration\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => ++n)\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add week labels\n    this.labels.selectAll('.label-week').remove()\n    this.labels.selectAll('.label-week')\n      .data(week_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-week')\n      .style('cursor', 'default')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return 'Week ' + d.week()\n      })\n      .attr('x', d => {\n        return weekScale(d.week())\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', weekday => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).week() === weekday.week()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('click', d => {\n        if (this.in_transition) { return }\n\n        // Check week data\n        let week_data = this.props.data.filter(e => {\n          return d.startOf('week') <= moment(e.date) && moment(e.date) < d.endOf('week')\n        })\n\n        // Don't transition if there is no data to show\n        if (!week_data.length) { return }\n\n        this.in_transition = true\n\n        // Set selected month to the one clicked on\n        this.selected = { date: d }\n\n        // Hide tooltip\n        this.hideTooltip()\n\n        // Remove all year overview related items and labels\n        this.removeMonthOverview()\n\n        // Redraw the chart\n        this.overview = 'week'\n        this.drawChart()\n      })\n\n    // Add day labels\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-day')\n      .data(day_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .style('cursor', 'pointer')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.label_padding / 3)\n      .attr('y', (d, i) => {\n        return dayScale(i) + dayScale.bandwidth() / 1.75\n      })\n      .style('text-anchor', 'left')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return moment(d).format('dddd')[0]\n      })\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected_day = moment(d)\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).day() === selected_day.day()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-month')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n\n    // Add button to switch back to previous overview\n    this.drawButton()\n  }\n\n\n  /**\n   * Draw week overview\n   */\n  drawWeekOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    // Define beginning and end of the week\n    let start_of_week = moment(this.selected.date).startOf('week')\n    let end_of_week = moment(this.selected.date).endOf('week')\n\n    // Filter data down to the selected week\n    let week_data = this.props.data.filter(d => {\n      return start_of_week <= moment(d.date) && moment(d.date) < end_of_week\n    })\n    let max_value = d3.max(week_data, d => {\n      return d3.max(d.summary, d => {\n        return d.value\n      })\n    })\n\n    // Define day labels and axis\n    let day_labels = d3.timeDays(moment().startOf('week'), moment().endOf('week'))\n    let dayScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.height])\n      .domain(day_labels.map(d => {\n        return moment(d).weekday()\n      }))\n\n    // Define week labels and axis\n    let week_labels = [start_of_week]\n    let weekScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.width])\n      .padding([0.01])\n      .domain(week_labels.map(weekday => {\n        return weekday.week()\n      }))\n\n    // Add week data items to the overview\n    this.items.selectAll('.item-block-week').remove()\n    let item_block = this.items.selectAll('.item-block-week')\n      .data(week_data)\n      .enter()\n      .append('g')\n      .attr('class', 'item item-block-week')\n      .style('cursor', 'pointer')\n      .attr('width', () => {\n        return (this.settings.width - this.settings.label_padding) / week_labels.length - this.settings.gutter * 5\n      })\n      .attr('height', () => {\n        return Math.min(dayScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('transform', d => {\n        return 'translate(' + weekScale(moment(d.date).week()) + ',' + ((dayScale(moment(d.date).weekday()) + dayScale.bandwidth() / 1.75) - 15) + ')'\n      })\n      .attr('total', d =>{\n        return d.total\n      })\n      .attr('date', d => {\n        return d.date\n      })\n      .attr('offset', 0)\n      .on('click', d => {\n        if (!!this.props.handler && typeof this.props.handler == 'function') {\n          this.props.handler(d)\n        }\n        // if (this.in_transition) { return }\n\n        // // Don't transition if there is no data to show\n        // if (d.total === 0) { return }\n\n        // this.in_transition = true\n\n        // // Set selected date to the one clicked on\n        // this.selected = d\n\n        // // Hide tooltip\n        // this.hideTooltip()\n\n        // // Remove all week overview related items and labels\n        // this.removeWeekOverview()\n\n        // // Redraw the chart\n        // this.overview = 'day'\n        // this.drawChart()\n      })\n\n    let item_width = (this.settings.width - this.settings.label_padding) / week_labels.length - this.settings.gutter * 5\n    let itemScale = d3.scaleLinear()\n      .rangeRound([0, item_width])\n\n    let color = d3.scaleLinear()\n      .range(['#ffffff', this.props.color])\n      .domain([-0.15, this.props.workingTime * 60 * 60])\n\n    let overColor = d3.scaleLinear()\n      .range([this.props.color, this.props.overColor])\n      .domain([this.props.workingTime * 60 * 60, this.props.workingTime * 1.25 * 60 * 60])\n\n    let item_gutter = this.settings.item_gutter\n    item_block.selectAll('.item-block-rect')\n      .data(d => d.summary)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block-rect')\n      .style('cursor', 'pointer')\n      .attr('x', function(d) {\n        let total = parseInt(d3.select(this.parentNode).attr('total'))\n        let offset = parseInt(d3.select(this.parentNode).attr('offset'))\n        itemScale.domain([0, total])\n        d3.select(this.parentNode).attr('offset', offset + itemScale(d.value))\n        return offset\n      })\n      .attr('width', function(d) {\n        let total = parseInt(d3.select(this.parentNode).attr('total'))\n        itemScale.domain([0, total])\n        return Math.max((itemScale(d.value) - item_gutter), 1)\n      })\n      .attr('height', () => {\n        return Math.min(dayScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('fill', d => {\n        return d.total > this.props.workingTime * 60 * 60 ?\n          overColor(d.total) :\n          d.total === 0 ?\n          'transparent' :\n          color(d.total)\n      })\n      .style('opacity', 0)\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n\n        // Get date from the parent node\n        let parentNode = d3.select(d3.event.currentTarget.parentNode)\n        let date = new Date(parentNode.attr('date'))\n\n        // Construct tooltip\n        let tooltip_html = ''\n        tooltip_html += `<div class=\"${styles.header}\"><strong>${d.name}</strong></div><br>`\n        tooltip_html += '<div><strong>' + (d.value ? this.formatTime(d.value) : 'Aucune donnes') + ' tracked</strong></div>'\n        tooltip_html += '<div>on ' + moment(date).format('dddd, Do MMM YYYY') + '</div>'\n\n        // Calculate tooltip position\n        let total = parseInt(parentNode.attr('total'))\n        itemScale.domain([0, total])\n        let x = parseInt(d3.select(d3.event.currentTarget).attr('x')) + itemScale(d.value) / 4 + this.settings.tooltip_width / 4\n        while (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 3)) {\n          x -= 10\n        }\n        let y = dayScale(moment(date).weekday()) + this.settings.tooltip_padding * 1.5\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n        this.hideTooltip()\n      })\n      .transition()\n      .delay(() => {\n        return (Math.cos(Math.PI * Math.random()) + 1) * this.settings.transition_duration\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => ++n)\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add week labels\n    this.labels.selectAll('.label-week').remove()\n    this.labels.selectAll('.label-week')\n      .data(week_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-week')\n      .style('cursor', 'default')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return 'Week ' + d.week()\n      })\n      .attr('x', d => {\n        return weekScale(d.week())\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', weekday => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).week() === weekday.week()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n\n    // Add day labels\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-day')\n      .data(day_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-day')\n      .style('cursor', 'default')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.label_padding / 3)\n      .attr('y', (d, i) => {\n        return dayScale(i) + dayScale.bandwidth() / 1.75\n      })\n      .style('text-anchor', 'left')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return moment(d).format('dddd')[0]\n      })\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected_day = moment(d)\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (moment(d.date).day() === selected_day.day()) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block-week')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n\n    // Add button to switch back to previous overview\n    this.drawButton()\n  }\n\n\n  /**\n   * Draw day overview\n   */\n  drawDayOverview() {\n    // Add current overview to the history\n    if (this.history[this.history.length - 1] !== this.overview) {\n      this.history.push(this.overview)\n    }\n\n    // Initialize selected date to today if it was not set\n    if (!Object.keys(this.selected).length) {\n      this.selected = this.props.data[this.props.data.length - 1]\n    }\n\n    let project_labels = this.selected.summary.map(project => {\n      return project.name\n    })\n    let projectScale = d3.scaleBand()\n      .rangeRound([this.settings.label_padding, this.settings.height])\n      .domain(project_labels)\n\n    let itemScale = d3.scaleTime()\n      .range([this.settings.label_padding * 2, this.settings.width])\n      .domain([moment(this.selected.date).startOf('day'), moment(this.selected.date).endOf('day')])\n    this.items.selectAll('.item-block').remove()\n    this.items.selectAll('.item-block')\n      .data(this.selected.details)\n      .enter()\n      .append('rect')\n      .attr('class', 'item item-block')\n      .style('cursor', 'pointer')\n      .attr('x', d => {\n        return itemScale(moment(d.date))\n      })\n      .attr('y', d => {\n        return (projectScale(d.name) + projectScale.bandwidth() / 2) - 15\n      })\n      .attr('width', d => {\n        let end = itemScale(d3.timeSecond.offset(moment(d.date), d.value))\n        return Math.max((end - itemScale(moment(d.date))), 1)\n      })\n      .attr('height', () => {\n        return Math.min(projectScale.bandwidth(), this.settings.max_block_height)\n      })\n      .attr('fill', () => {\n        return this.props.color\n      })\n      .style('opacity', 0)\n      .on('mouseover', d => {\n        if (this.in_transition) { return }\n\n        // Construct tooltip\n        let tooltip_html = ''\n        tooltip_html += `<div class=\"${styles.header}\"><strong>${d.name}</strong><div><br>`\n        tooltip_html += '<div><strong>' + (d.value ? this.formatTime(d.value) : 'Aucune donnes') + ' tracked</strong></div>'\n        tooltip_html += '<div>on ' + moment(d.date).format('dddd, MMM Do YYYY HH:mm') + '</div>'\n\n        // Calculate tooltip position\n        let x = d.value * 100 / (60 * 60 * 24) + itemScale(moment(d.date))\n        while (this.settings.width - x < (this.settings.tooltip_width + this.settings.tooltip_padding * 3)) {\n          x -= 10\n        }\n        let y = projectScale(d.name) + projectScale.bandwidth() / 2 + this.settings.tooltip_padding / 2\n\n        // Show tooltip\n        this.tooltip.html(tooltip_html)\n          .style('left', x + 'px')\n          .style('top', y + 'px')\n          .transition()\n          .duration(this.settings.transition_duration / 2)\n          .ease(d3.easeLinear)\n          .style('opacity', 1)\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n        this.hideTooltip()\n      })\n      .on('click', d => {\n        if (!!this.props.handler && typeof this.props.handler == 'function') {\n          this.props.handler(d)\n        }\n      })\n      .transition()\n      .delay(() => {\n        return (Math.cos(Math.PI * Math.random()) + 1) * this.settings.transition_duration\n      })\n      .duration(() => {\n        return this.settings.transition_duration\n      })\n      .ease(d3.easeLinear)\n      .style('opacity', 0.5)\n      .call((transition, callback) => {\n        if (transition.empty()) {\n          callback()\n        }\n        let n = 0\n        transition\n          .each(() => ++n)\n          .on('end', function() {\n            if (!--n) {\n              callback.apply(this, arguments)\n            }\n          })\n      }, () => {\n        this.in_transition = false\n      })\n\n    // Add time labels\n    let timeLabels = d3.timeHours(\n      moment(this.selected.date).startOf('day'),\n      moment(this.selected.date).endOf('day')\n    )\n    let timeScale = d3.scaleTime()\n      .range([this.settings.label_padding * 2, this.settings.width])\n      .domain([0, timeLabels.length])\n    this.labels.selectAll('.label-time').remove()\n    this.labels.selectAll('.label-time')\n      .data(timeLabels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-time')\n      .style('cursor', 'default')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => {\n        return moment(d).format('HH:mm')\n      })\n      .attr('x', (d, i) => {\n        return timeScale(i)\n      })\n      .attr('y', this.settings.label_padding / 2)\n      .on('mouseenter', d => {\n        if (this.in_transition) { return }\n\n        let selected = itemScale(moment(d))\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            let start = itemScale(moment(d.date))\n            let end = itemScale(moment(d.date).add(d.value, 'seconds'))\n            return (selected >= start && selected <= end) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 0.5)\n      })\n\n    // Add project labels\n    let label_padding = this.settings.label_padding\n    this.labels.selectAll('.label-project').remove()\n    this.labels.selectAll('.label-project')\n      .data(project_labels)\n      .enter()\n      .append('text')\n      .attr('class', 'label label-project')\n      .style('cursor', 'default')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.gutter)\n      .attr('y', d => {\n        return projectScale(d) + projectScale.bandwidth() / 2\n      })\n      .attr('min-height', () => {\n        return projectScale.bandwidth()\n      })\n      .style('text-anchor', 'left')\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .text(d => d)\n      .each(function() {\n        let obj = d3.select(this),\n          text_length = obj.node().getComputedTextLength(),\n          text = obj.text()\n        while (text_length > (label_padding * 1.5) && text.length > 0) {\n          text = text.slice(0, -1)\n          obj.text(text + '...')\n          text_length = obj.node().getComputedTextLength()\n        }\n      })\n      .on('mouseenter', project => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', d => {\n            return (d.name === project) ? 1 : 0.1\n          })\n      })\n      .on('mouseout', () => {\n        if (this.in_transition) { return }\n\n        this.items.selectAll('.item-block')\n          .transition()\n          .duration(this.settings.transition_duration)\n          .ease(d3.easeLinear)\n          .style('opacity', 0.5)\n      })\n\n    // Add button to switch back to previous overview\n    this.drawButton()\n  }\n\n\n  /**\n   * Draw the button for navigation purposes\n   */\n  drawButton() {\n    this.buttons.selectAll('.button').remove()\n    let button = this.buttons.append('g')\n      .attr('class', 'button button-back')\n      .style('cursor', 'default')\n      .attr('fill', 'transparent')\n      .style('opacity', 0)\n      .style('stroke-width', 2)\n      .style('display', 'block')\n      .style('stroke', 'rgb(170, 170, 170)')\n      .on('click', () => {\n        if (this.in_transition) { return }\n\n        // Set transition boolean\n        this.in_transition = true\n\n        // Clean the canvas from whichever overview type was on\n        if (this.overview === 'year') {\n          this.removeYearOverview()\n        } else if (this.overview === 'month') {\n          this.removeMonthOverview()\n        } else if (this.overview === 'week') {\n          this.removeWeekOverview()\n        } else if (this.overview === 'day') {\n          this.removeDayOverview()\n        }\n\n        // Redraw the chart\n        this.history.pop()\n        this.overview = this.history.pop()\n        this.drawChart()\n      })\n    button.append('circle')\n      .attr('cx', this.settings.label_padding / 2.25)\n      .attr('cy', this.settings.label_padding / 2.5)\n      .attr('r', this.settings.item_size / 2)\n    button.append('text')\n      .style('stroke-width', 1)\n      .style('text-anchor', 'middle')\n      .style('fill', 'rgb(170, 170, 170)')\n      .attr('x', this.settings.label_padding / 2.25)\n      .attr('y', this.settings.label_padding / 2.5)\n      .attr('dy', () => {\n        return Math.floor(this.settings.width / 100) / 3\n      })\n      .attr('font-size', () => {\n        return Math.floor(this.settings.label_padding / 3) + 'px'\n      })\n      .html('&#x2190')\n    button.transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 1)\n  }\n\n\n  /**\n   * Transition and remove items and labels related to global overview\n   */\n  removeGlobalOverview() {\n    this.items.selectAll('.item-block-year')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .remove()\n    this.labels.selectAll('.label-year').remove()\n  }\n\n\n  /**\n   * Transition and remove items and labels related to year overview\n   */\n  removeYearOverview() {\n    this.items.selectAll('.item-circle')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .remove()\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-month').remove()\n    this.hideBackButton()\n  }\n\n\n  /**\n   * Transition and remove items and labels related to month overview\n   */\n  removeMonthOverview() {\n    this.items.selectAll('.item-block-month').selectAll('.item-block-rect')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d, i) => {\n        return (i % 2 === 0) ? -this.settings.width / 3 : this.settings.width / 3\n      })\n      .remove()\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-week').remove()\n    this.hideBackButton()\n  }\n\n\n  /**\n   * Transition and remove items and labels related to week overview\n   */\n  removeWeekOverview() {\n    this.items.selectAll('.item-block-week').selectAll('.item-block-rect')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d, i) => {\n        return (i % 2 === 0) ? -this.settings.width / 3 : this.settings.width / 3\n      })\n      .remove()\n    this.labels.selectAll('.label-day').remove()\n    this.labels.selectAll('.label-week').remove()\n    this.hideBackButton()\n  }\n\n\n  /**\n   * Transition and remove items and labels related to daily overview\n   */\n  removeDayOverview() {\n    this.items.selectAll('.item-block')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .attr('x', (d, i) => {\n        return (i % 2 === 0) ? -this.settings.width / 3 : this.settings.width / 3\n      })\n      .remove()\n    this.labels.selectAll('.label-time').remove()\n    this.labels.selectAll('.label-project').remove()\n    this.hideBackButton()\n  }\n\n\n  /**\n   * Helper function to hide the tooltip\n   */\n  hideTooltip() {\n    this.tooltip.transition()\n      .duration(this.settings.transition_duration / 2)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n  }\n\n\n  /**\n   * Helper function to hide the back button\n   */\n  hideBackButton() {\n    this.buttons.selectAll('.button')\n      .transition()\n      .duration(this.settings.transition_duration)\n      .ease(d3.easeLinear)\n      .style('opacity', 0)\n      .remove()\n  }\n\n\n  /**\n   * Helper function to convert seconds to a human readable format\n   * @param seconds Integer\n   */\n  formatTime(seconds) {\n    let hours = Math.floor(seconds / 3600)\n    let minutes = Math.floor((seconds - (hours * 3600)) / 60)\n    let time = ''\n    if (hours > 0) {\n      time += hours === 1 ? '1 heure ' : hours + ' heures '\n    }\n    if (minutes > 0) {\n      time += minutes === 1 ? '1 minute' : minutes + ' minutes'\n    }\n    if (hours === 0 && minutes === 0) {\n      time = Math.round(seconds) + ' secondes'\n    }\n    return time\n  }\n\n\n  render() {\n    return (\n      <div id='calendar-heatmap'\n        className={styles.calendarHeatmap}\n        ref={elem => {this.container = elem}}>\n      </div>\n    )\n  }\n}\n\nCalendarHeatmap.defaultProps = {\n  data: [],\n  overview: 'year',\n  color: '#ff4500',\n  overColor: '#00ff00',\n  workingTime: 10,\n  handler: undefined,\n}\n\nexport default CalendarHeatmap\n\n\n\n// WEBPACK FOOTER //\n// ./src/calendar-heatmap.component.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\",\"umd\":\"react\"}\n// module id = 2\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 3\n// module chunks = 0 1","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 4\n// module chunks = 0 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!./calendar-heatmap.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!./calendar-heatmap.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!./calendar-heatmap.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/calendar-heatmap.css\n// module id = 5\n// module chunks = 0 1","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".calendar-heatmap__calendarHeatmap___2vEkr {\\n  font-family: Helvetica, Arial, sans-serif;\\n  user-select: none;\\n  -ms-user-select: none;\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n}\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm {\\n  pointer-events: none;\\n  position: absolute;\\n  z-index: 9999;\\n  width: 250px;\\n  max-width: 250px;\\n  overflow: hidden;\\n  padding: 15px;\\n  font-size: 12px;\\n  text-align: left;\\n  line-height: 14px;\\n  color: rgb(51, 51, 51);\\n  font-family: Helvetica, arial, 'Open Sans', sans-serif;\\n  background: rgba(255, 255, 255, 0.75);\\n}\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm .calendar-heatmap__header___y_GbL strong {\\n  display: inline-block;\\n  width: 250px;\\n}\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm span {\\n  display: inline-block;\\n  width: 50%;\\n  padding-right: 10px;\\n  box-sizing: border-box;\\n}\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm span,\\n.calendar-heatmap__calendarHeatmap___2vEkr .calendar-heatmap__heatmapTooltip___2eEYm .calendar-heatmap__header___y_GbL strong {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"calendarHeatmap\": \"calendar-heatmap__calendarHeatmap___2vEkr\",\n\t\"heatmapTooltip\": \"calendar-heatmap__heatmapTooltip___2eEYm\",\n\t\"header\": \"calendar-heatmap__header___y_GbL\"\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?modules&importLoaders=1&localIdentName=[name]__[local]___[hash:base64:5]!./src/calendar-heatmap.css\n// module id = 6\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 7\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/addStyles.js\n// module id = 8\n// module chunks = 0 1","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/urls.js\n// module id = 9\n// module chunks = 0 1"],"sourceRoot":""}